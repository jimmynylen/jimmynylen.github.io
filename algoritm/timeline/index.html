<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Timeline &#8611; Artificiell Intelligens</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400&family=Source+Serif+Pro&display=swap" />
  <style>
    :root {
      --bg: #f4f4f4;
      --white: #ffffff;
      --primary: #40534C;
      --cell_mediumgreen: #3CB371;
      --dark: #1A3636;
      --text: #644117;
      --subtle: #D6BD98;
      --effect: #677D6A;
      --placeholder: #B9AFA1;
      --textarea: #FCF8F4;
      --extra_effect: #D98E04;
      --extra_primary: #E0A030;
      --extra_red: #A44434;
      --status_graygreen: #8E9775;
      --status_olivegreen: #5B7052;
      --status_ochreyellow: #D4A76A;
      --status_goldenbrown: #C2955C;
      --status_sienna: #A0522D;
      --status_burntumber: #8A3324;
      --status_steelblue: #4682B4;
      --status_darkblue:  #2C3E50;
      --status_mjuklavendel: #A7A0C9;
      --status_mutedpurple:  #6B5876;
      
      /* Gradient f√∂r kortbakgrund */
      --card-gradient-start: #C2955C;  
      --card-gradient-end:   #D4A76A;  

      /* Nya variabler f√∂r scrollande textens utseende */
      --scroll-bg: rgba(0, 0, 0, 0.1);      /* Bakgrundsf√§rg */
      --scroll-border: #ffffff;              /* Ramf√§rg */
      --scroll-border-width: 0px;            /* Ramtjocklek */
      --scroll-padding: 5px;                 /* Padding */
    }
    
    * { box-sizing: border-box; }
    
    body {
      font-family: 'Source Serif Pro', serif;
      margin: 0;
      padding: 0;
      background-color: var(--bg);
    }
    
    .container {
      width: 740px;
      min-width: 740px;
      background-color: var(--white);
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      padding: 20px;
      margin: 20px auto;
    }
    
    /* Header */
    h1 {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      font-size: 24px;
      color: var(--white);
      background-color: var(--primary);
      border-radius: 8px 8px 0 0;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .header-controls {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .header-score {
      font-size: 16px;
      color: var(--white);
    }
    
    /* Informationsruta */
    .inforuta {
      margin-top: 0;
      font-size: 15px;
      color: var(--text);
      background-color: var(--subtle);
      border-radius: 0 0 8px 8px;
      padding: 10px 20px;
      margin-bottom: 15px;
    }
    
    /* Alternativomr√•de med dropdowns och knapp */
    .options {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }
    .option-group {
      flex: 0 0 calc((100% - 20px) * 0.4);
    }
    .option-group select {
      background-color: var(--textarea);
      border: 1px solid var(--effect);
      color: var(--dark);
      font-size: 13px;
      padding: 10px;
      border-radius: 5px;
      width: 100%;
    }
    .button-group {
      flex: 0 0 calc((100% - 20px) * 0.2);
    }
    .button-group button {
      width: 100%;
      padding: 11px 20px;
      font-size: 14px;
    }
    
    .game-area {
      display: flex;
      gap: 15px;
      background-color: var(--effect);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
      border: 1px solid var(--primary);
    }
    
    /* Kortlistan */
    .cards-container {
      flex: 0 0 40%;
      background-color: var(--primary);
      font-family: monospace;
      padding: 10px;
      border-radius: 8px;
      height: 475px;
      overflow-y: auto;
      scrollbar-color: var(--effect) var(--primary);
    }
    
    .card {
      border-left: 5px solid var(--status_goldenbrown);
      background-color: var(--status_ochreyellow);
      border-radius: 4px;
      padding: 10px;
      margin-bottom: 10px;
      cursor: pointer;
    }
    
    .card-headline {
      font-size: 14px;
      color: var(--white);
    }
    /* Container f√∂r den scrollande texten med bakgrund, ram och padding */
    .card-description {
      overflow: hidden;
      white-space: nowrap;
      position: relative;
      color: var(--white);
      font-size: 12px;
      margin-top: 5px;
      border-radius: 4px;
      background-color: var(--scroll-bg);
      border: var(--scroll-border-width) solid var(--scroll-border);
      padding: var(--scroll-padding);
    }
    .scrolling-text {
      display: inline-block;
      white-space: nowrap;
      /* Animationen flyttar hela blocket med dubbelt inneh√•ll s√• att den andra kopian b√∂rjar direkt */
      animation: scroll 30s linear infinite;
    }
    /* Separator f√∂r att markera att texten b√∂rjar om */
    .separator {
      margin: 0 0.5em;
    }
    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    
    /* Vid klick (beh√•ller ursprunglig effekt) */
    .card.selected {
      border-left: 5px solid var(--status_olivegreen);
      background-color: var(--status_graygreen);
    }
    
    /* Animationsklasser */
    .card-animate-in {
      animation: slideIn 0.5s ease-out;
    }
    .card-animate-out {
      animation: slideOut 0.5s ease-out forwards;
    }
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideOut {
      from { opacity: 1; transform: translateY(0); }
      to { opacity: 0; transform: translateY(10px); }
    }
    
    /* Animation f√∂r tidslinjeh√§ndelser */
    .timeline-animate {
      animation: slideIn 0.5s ease-out;
    }
    
    /* Styling f√∂r game-over-kortet */
    .game-over-card {
      background-color: var(--primary);
      border: 1px dashed var(--effect);
      border-radius: 4px;
      color: var(--white);
      padding: 10px;
    }
    
    /* Tidslinjerutan */
    .timeline-container {
      flex: 1;
      background-color: var(--primary);
      padding: 10px;
      border-radius: 8px;
      height: 475px;
      overflow-y: auto;
      scrollbar-color: var(--effect) var(--primary);
    }
    
    .timeline-event {
      background-color: var(--status_graygreen);
      border-left: 5px solid var(--status_olivegreen);
      border-radius: 4px;
      margin: 5px 0;
      padding: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
    }
    .event-year {
      font-family: monospace;
      font-size: 20px;
      font-weight: 600;
      color: var(--white);
      min-width: 60px;
      text-align: center;
      padding: 5px;
      background-color: rgba(91, 112, 82, 0.5);
      border: 1px solid var(--status_olivegreen);
      border-radius: 4px;
    }
    .event-headline {
      font-family: monospace;
      font-size: 14px;
      font-weight: 500;
      color: var(--white);
    }
    .event-description {
      font-family: monospace;
      margin-top: 5px;
      font-size: 12px;
      color: var(--white);
      display: none;
    }
    .drop-zone {
      background-color: var(--primary);
      color: var(--white);
      border: 1px dashed var(--effect);
      font-family: monospace;
      font-size: 12px;
      border-radius: 4px;
      margin: 5px 0;
      padding: 5px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .timeline-container > .drop-zone:first-child {
      margin-top: 0;
    }
    .timeline-container > .drop-zone:last-child {
      margin-bottom: 0;
    }
    .error {
      animation: blinkRed 0.5s linear infinite;
    }
    @keyframes blinkRed {
      0% { background-color: var(--primary); }
      50% { background-color: red; }
      100% { background-color: var(--primary); }
    }
    
    /* Highscore-rutan l√§ngst ner */
    .highscore-board {
      font-family: 'Poppins', sans-serif;
      color: var(--white);
      background-color: var(--extra_effect);
      border: 1px solid #A44434;
      border-radius: 5px;
      margin-top: 20px;
      padding: 15px;
      width: 100%;
      font-size: 40px;
      text-align: center;
    }
    .highscore-inner {
      background-color: var(--extra_primary);
      font-weight: 500;
      border-radius: 5px;
      padding: 10px;
      margin: 0;
      text-shadow: 0px 0px 7px var(--extra_red);
      display: flex;
      justify-content: center;
      gap: 20px;
    }
    
    #separator {
      border-top: 1px dashed var(--dark);
      margin: 20px 0;
    }
    
    button {
      display: block;
      width: 100%;
      margin: 0 auto;
      padding: 10px 20px;
      font-size: 16px;
      background-color: var(--primary);
      color: var(--white);
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: var(--effect);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>
      <span class="header-title">Timeline &#8611; Artificiell Intelligens</span>
      <span class="header-controls">
        <span id="current-score" class="header-score">0</span>
        <span class="header-emoji">üïπÔ∏è</span>
      </span>
    </h1>
    <p class="inforuta">
      Vad kan du egentligen om den Artificiella Intelligensens historia? Testa dina kunskaper genom att placera in historiska h√§ndelser p√• en tidslinje. H√§ndelserna h√§r fokuserar p√• de genombrott och id√©er som direkt p√•verkat AI:s utveckling ‚Äì fr√•n tidiga koncept till moderna system.
    </p>
    
    <!-- Alternativomr√•de med dropdowns och knapp -->
    <div class="options">
      <div class="option-group">
        <select id="difficulty">
          <option value="latt">L√§tt sv√•righetsgrad</option>
          <option value="medel">Medel sv√•righetsgrad</option>
          <option value="svar" selected>H√∂g sv√•righetsgrad</option>
        </select>
      </div>
      <div class="option-group">
        <select id="hand-count">
          <option value="1">B√∂rja med 1 kort (+4p)</option>
          <option value="2">B√∂rja med 2 kort (+3p)</option>
          <option value="3">B√∂rja med 3 kort (+2p)</option>
          <option value="4">B√∂rja med 4 kort (+1p)</option>
          <option value="5" selected>B√∂rja med 5 kort</option>
          <option value="6">B√∂rja med 6 kort (-1p)</option>
          <option value="7">B√∂rja med 7 kort (-2p)</option>
          <option value="8">B√∂rja med 8 kort (-3p)</option>
          <option value="9">B√∂rja med 9 kort (-4p)</option>
        </select>
      </div>
      <div class="button-group">
        <button id="reset-btn">Starta om</button>
      </div>
    </div>
    
    <div class="game-area">
      <div class="cards-container" id="cards-container">
        <!-- Spelkorten visas h√§r -->
      </div>
      <div class="timeline-container" id="timeline-container">
        <!-- Tidslinjen med h√§ndelser visas h√§r -->
      </div>
    </div>
    
    <hr id="separator" />
    
    <!-- Highscore-ruta l√§ngst ner -->
    <div class="highscore-board">
      <div class="highscore-inner" id="highscore">
        <!-- Topp 3-highscores uppdateras h√§r -->
      </div>
    </div>
  </div>
  
  <script>
    // Globala variabler
    let gameOver = false;
    let animateNewCard = false; // Flagga f√∂r att animera nya kort
    
    /* Uppdaterad h√§ndelsedata ‚Äì AI-centrerad historik med nya till√§gg */
    const eventsData = [
      { year: 1818, headline: "Mary Shelley publicerar Frankenstein", description: "Mary Shelley's Frankenstein l√§gger fram en tidig vision om att skapa liv genom teknik.", importance: 2 },
      { year: 1822, headline: "Charles Babbage mekaniska ber√§kningsmaskin", description: "Charles Babbage skapar en ritning av sin Difference Engine ‚Äì en tidig vision om mekanisk ber√§kning.", importance: 1 },
      { year: 1837, headline: "Ada Lovelace skriver f√∂rsta algoritmen", description: "Ada Lovelace skapar det f√∂rsta algoritmiska konceptet f√∂r Charles Babbages maskin.", importance: 1 },
      { year: 1927, headline: "Filmen Metropolis sl√§pps", description: "Filmen Metropolis introducerar en robotkarakt√§r och formar en tidig bild av teknikens framtid.", importance: 2 },
      { year: 1936, headline: "Alan Turing definierar Turingmaskinen", description: "Alan Turing publicerar 'On Computable Numbers' och introducerar den teoretiska modellen f√∂r maskinber√§kning.", importance: 1 },
      { year: 1940, headline: "Tyskarnas Enigma-maskinen kn√§cks", description: "Alan Turing och kollegor kn√§cker Enigma-koden ‚Äì en h√§ndelse som b√•de p√•verkar krigsutfall och inspirerar datorid√©er.", importance: 2 },
      { year: 1943, headline: "Neurala n√§tverk tar sin b√∂rjan", description: "McCulloch och Pitts presenterar den f√∂rsta matematiska modellen f√∂r neurala n√§tverk.", importance: 2 },
      { year: 1943, headline: "Colossus kn√§cker koder", description: "Colossus ‚Äì v√§rldens f√∂rsta programmerbara digitala dator ‚Äì anv√§nds f√∂r att kn√§cka tyska koder under andra v√§rldskriget.", importance: 2 },
      { year: 1946, headline: "ENIAC - den f√∂rsta elektroniska datorn", description: "ENIAC, den f√∂rsta elektroniska allm√§nna datorn, tas i bruk och banar v√§g f√∂r digital ber√§kning.", importance: 1 },
      { year: 1947, headline: "Transistorn uppfinns vid Bell Labs", description: "Transistorn revolutionerar elektronikindustrin och m√∂jligg√∂r avancerad datorteknik.", importance: 1 },
      { year: 1949, headline: "Hebbs l√§rregel publiceras", description: "Donald Hebb publicerar 'The Organization of Behavior', vilket introducerar principer f√∂r hur neuroner anpassar sig ‚Äì en id√© som senare inspirerar utvecklingen av neurala n√§tverk.", importance: 2 },
      { year: 1950, headline: "Alan Turing formulerar Turingtestet", description: "Alan Turing formulerar Turingtestet f√∂r att m√§ta maskinintelligens.", importance: 1 },
      { year: 1950, headline: "Isaac Asimov publicerar 'I, Robot'", description: "Isaac Asimovs noveller s√§tter ig√•ng diskussioner kring robotar och artificiell intelligens.", importance: 2 },
      { year: 1951, headline: "Ferranti Mark 1 lanseras", description: "Ferranti Mark 1 blir den f√∂rsta kommersiellt tillg√§ngliga datorn.", importance: 2 },
      { year: 1952, headline: "Samuel skapar AI‚Äëschackprogram", description: "Arthur Samuel utvecklar ett schackprogram med maskininl√§rning ‚Äì ett tidigt praktiskt exempel p√• AI.", importance: 2 },
      { year: 1956, headline: "Begreppet Artificiell Intelligens myntas", description: "Dartmouth‚Äëkonferensen h√•lls och myntar begreppet 'artificiell intelligens', startpunkten f√∂r AI‚Äëforskning.", importance: 1 },
      { year: 1957, headline: "Perceptron, det f√∂rsta neurala n√§tverket", description: "Frank Rosenblatt utvecklar perceptron ‚Äì en tidig modell f√∂r neurala n√§tverk och maskininl√§rning.", importance: 2 },
      { year: 1958, headline: "Integrerade kretsar m√∂jligg√∂r digital revolution", description: "Inventionen av integrerade kretsar (av Jack Kilby och Robert Noyce) blir en kritisk teknisk milstolpe.", importance: 1 },
      { year: 1958, headline: "Programmeringsspr√•ket Lisp lanseras", description: "John McCarthy utvecklar programmeringsspr√•ket Lisp, ett centralt verktyg inom AI-forskning under decennier.", importance: 2 },
      { year: 1959, headline: "Begreppet maskininl√§rning myntas", description: "Termen 'maskininl√§rning' b√∂rjar anv√§ndas f√∂r att beskriva algoritmiska metoder f√∂r att f√∂rb√§ttra datorprestanda baserat p√• data.", importance: 2 },
      { year: 1961, headline: "Unimate, den f√∂rsta industriella roboten", description: "Unimate introduceras och markerar b√∂rjan p√• robotik i produktionen.", importance: 3 },
      { year: 1962, headline: "ELIZA - den f√∂rsta chattboten", description: "Joseph Weizenbaum skapar ELIZA, som simulerade en samtalsbaserad terapeut via f√∂rutbest√§mda m√∂nster.", importance: 2 },
      { year: 1966, headline: "Shakey roboten tar sina f√∂rsta steg", description: "Shakey the Robot, den f√∂rsta mobila roboten med perceptuella och beslutsfattande f√∂rm√•gor, utvecklas.", importance: 2 },
      { year: 1968, headline: "2001: A Space Odyssey lanseras", description: "Filmen introducerar HAL 9000, en ikonisk AI‚Äëkarakt√§r som formar popkulturens syn p√• intelligenta maskiner.", importance: 3 },
      { year: 1969, headline: "ARPANET, f√∂reg√•ngaren till Internet", description: "Det f√∂rsta n√§tverket som f√∂rbinder datorer, ARPANET, l√§gger grunden f√∂r dagens internet och m√∂jligg√∂r global datadelning.", importance: 3 },
      { year: 1970, headline: "Utvecklingen av relationella databaser", description: "Edgar F. Codd introducerade den relationella databasteorin, vilket revolutionerade s√§ttet att lagra och hantera stora datam√§ngder ‚Äì en nyckelfaktor f√∂r maskininl√§rning.", importance: 2 },
      { year: 1971, headline: "Den f√∂rsta mikroprocessorn (Intel 4004)", description: "Den f√∂rsta mikroprocessorn m√∂jliggjorde en √∂kad ber√§kningskraft och lade grunden f√∂r den moderna datorrevolutionen, vilket senare blev avg√∂rande f√∂r AI-utvecklingen.", importance: 2 },
      { year: 1972, headline: "Programmmeriingsspr√•ket C utvecklas", description: "Dennis Ritchie utvecklar C-spr√•ket, som blir ett centralt programmeringsspr√•k inom systemutveckling och AI.", importance: 3 },
      { year: 1973, headline: "Bob Metcalfe utvecklar Ethernet", description: "Bob Metcalfe och kollegor utvecklar Ethernet, vilket revolutionerar datakommunikationen och n√§tverksinfrastrukturen.", importance: 2 },
      { year: 1974, headline: "MYCIN diagnostiserar med AI", description: "MYCIN, ett tidigt expertssystem f√∂r medicinsk diagnostik, visar AI:s praktiska potential.", importance: 2 },
      { year: 1975, headline: "Erik Sandewall blir professor i AI", description: "Erik Sandewall tilldelas en professur i AI ‚Äì en viktig milstolpe i svensk AI‚Äëhistoria.", importance: 2 },
      { year: 1978, headline: "Neurala n√§tverk √•terupplivas vid MIT", description: "Forskare vid MIT √•terupplivar neurala n√§tverk med nya metoder ‚Äì en v√§ndpunkt f√∂r modern AI.", importance: 3 },
      { year: 1979, headline: "DENDRAL - AI f√∂r kemisk analys skapas", description: "DENDRAL, ett av de f√∂rsta expertssystemen, anv√§nds f√∂r kemisk analys och visar praktiska AI‚Äëtill√§mpningar.", importance: 3 },
      { year: 1980, headline: "XCON optimerar industriell produktion", description: "Digital Equipment Corporation implementerar XCON, ett expertssystem som automatiserar datorkonfigurationer.", importance: 3 },
      { year: 1983, headline: "Domain Name System (DNS) introduceras", description: "Paul Mockapetris utvecklar DNS, en nyckelteknologi f√∂r internets infrastruktur.", importance: 2 },
      { year: 1985, headline: "Marvin Minsky publicerar 'The Society of Mind'", description: "Marvin Minsky presenterar teorin om att intelligens kan uppst√• fr√•n samverkan mellan m√•nga sm√• enheter.", importance: 2 },
      { year: 1986, headline: "Backpropagation revolutionerar neurala n√§tverk", description: "Geoffrey Hinton och kollegor visar hur backpropagation effektivt kan tr√§na neurala n√§tverk.", importance: 2 },
      { year: 1987, headline: "Fuzzy logic i japansk t√•gkontroll", description: "Japanska t√•goperat√∂rer implementerar fuzzy logic i sina kontrollsystem f√∂r att optimera driften.", importance: 3 },
      { year: 1991, headline: "Uppfinningen av World Wide Web", description: "Tim Berners-Lee skapade webben, vilket revolutionerade informationsspridningen och skapade enorma datak√§llor som senare blev grundl√§ggande f√∂r AI och maskininl√§rning.", importance: 3 },
      { year: 1991, headline: "Programmeringsspr√•ket Python utvecklas", description: "Python blev snabbt popul√§rt inom AI-forskningen tack vare sitt enkla syntax och rika bibliotek, vilket underl√§ttade utvecklingen av avancerade algoritmer och modeller.", importance: 3 },
      { year: 1992, headline: "Support Vector Machines introduceras", description: "Support Vector Machines, en banbrytande metod f√∂r klassificering, b√∂rjar anv√§ndas inom maskininl√§rning.", importance: 3 },
      { year: 1997, headline: "Deep Blue besegrar Kasparov", description: "IBM:s Deep Blue besegrar schackm√§staren Garry Kasparov ‚Äì en milstolpe i AI:s probleml√∂sningsf√∂rm√•ga.", importance: 1 },
      { year: 1998, headline: "Kismet, den f√∂rsta sociala roboten", description: "Kismet, en robot som kunde l√§sa och uttrycka k√§nslor, utvecklas vid MIT av Dr. Cynthia Breazeal", importance: 1 },
      { year: 1999, headline: "Sony lanserar robothunden AIBO", description: "Sony introducerar AIBO, en robot-hund med autonoma funktioner som visar praktiska AI‚Äëtill√§mpningar inom robotik.", importance: 3 },
      { year: 2002, headline: "Roomba introduceras i hush√•llet", description: "iRobot lanserar Roomba ‚Äì en robotdammsugare som demonstrerar AI i konsumentprodukter.", importance: 3 },
      { year: 2006, headline: "Djupinl√§rning √•terupplivas", description: "Geoffrey Hinton och hans team √•terupplivar djupinl√§rning genom betydande tekniska framsteg, vilket utl√∂ser en revolution inom AI.", importance: 1 },
      { year: 2009, headline: "Google Brain-projektet startas", description: "Google Brain initierar stora satsningar p√• djupinl√§rning och neurala n√§tverk, vilket accelererar AI-forskningen.", importance: 3 },
      { year: 2011, headline: "IBM:s Watson vinner Jeopardy", description: "Watson vinner Jeopardy! och demonstrerar sin f√∂rm√•ga att bearbeta naturligt spr√•k.", importance: 1 },
      { year: 2011, headline: "Apple lanserar r√∂stassistenten Siri", description: "Apple introducerar Siri ‚Äì en r√∂ststyrd assistent som s√§tter AI i praktiska konsumentprodukter.", importance: 1 },
      { year: 2012, headline: "AlexNet visar djupinl√§rningens potential", description: "AlexNet vinner ImageNet‚Äët√§vlingen och visar den enorma potentialen hos djupinl√§rning.", importance: 1 },
      { year: 2013, headline: "Google lanserar sina sj√§lvk√∂rande bilar", description: "Google presenterar sina autonoma fordon ‚Äì en milstolpe inom AI‚Äëdriven transportteknik.", importance: 3 },
      { year: 2014, headline: "Chattboten Eugene klarar Turingtestet", description: "AI‚Äëprogrammet Eugene, inspirerat av Eugene Goostman, anses ha klarat Turingtestet.", importance: 2 },
      { year: 2015, headline: "OpenAI grundas och p√•b√∂rjar sin AI‚Äëforskning", description: "OpenAI grundas med m√•let att utveckla AI p√• ett s√§kert och etiskt s√§tt.", importance: 3 },
      { year: 2016, headline: "AlphaGo besegrar v√§rldsm√§staren", description: "AlphaGo besegrar den koreanska Go‚Äëm√§staren Lee Sedol ‚Äì en milstolpe f√∂r AI:s strategiska f√∂rm√•ga.", importance: 1 },
      { year: 2017, headline: "OpenAI Five t√§vlar i Dota 2", description: "OpenAI Five, en AI‚Äëagent, t√§vlar i Dota 2 och demonstrerar avancerade metoder inom f√∂rst√§rkt l√§rande.", importance: 3 },
      { year: 2018, headline: "BERT revolutionerar NLP", description: "Google publicerar BERT-modellen, som transformerar hur datorer f√∂rst√•r och bearbetar naturligt spr√•k.", importance: 3 },
      { year: 2021, headline: "Transformer-modeller omformar AI‚Äëforskningen", description: "Transformermodeller blir grunden f√∂r m√•nga moderna AI‚Äësystem.", importance: 3 },
      { year: 2022, headline: "ChatGPT lanseras med version 3.5", description: "ChatGPT och liknande modeller revolutionerar hur vi interagerar med AI i vardagen.", importance: 1 },
      { year: 2023, headline: "Multimodala AI‚Äësystem expanderar", description: "System som kan hantera flera datatyper (text, bild, ljud) √∂ppnar nya m√∂jligheter f√∂r AI.", importance: 3 },
      { year: 2025, headline: "DeepSeek lanseras med version R1", description: "DeepSeek lanseras med funktionen DeepThink som l√•ter AI:n resonera och djupg√•ende analysera de uppmaningar den f√•r.", importance: 2 }
    ];
    
    // Spelvariabler
    let deck = [];      // Filtrerad kortlek (unika h√§ndelser per √•r)
    let hand = [];      // Spelarens aktuella hand ("liv")
    let timeline = [];  // H√§ndelser p√• tidslinjen
    let score = 0;      // Aktuell po√§ng
    let initialHandCount = 5; // Startantal kort
    let topScores = []; // Highscores lagrade som objekt { score, date }
    
    // Spelarstatus
    let gameOngoing = false;
    
    // Spara tidigare dropdown-v√§rden
    const difficultySelect = document.getElementById('difficulty');
    const handCountSelect = document.getElementById('hand-count');
    let previousDifficulty = difficultySelect.value;
    let previousHandCount = handCountSelect.value;
    
    // DOM-referenser
    const cardsContainer = document.getElementById('cards-container');
    const timelineContainer = document.getElementById('timeline-container');
    const currentScoreEl = document.getElementById('current-score');
    const highScoreEl = document.getElementById('highscore');
    const resetBtn = document.getElementById('reset-btn');
    let selectedCard = null;
    
    // Funktion f√∂r att spara highScores i localStorage
    function saveHighScores() {
      localStorage.setItem("topScores", JSON.stringify(topScores));
    }
    
    // Funktion f√∂r att ladda highScores fr√•n localStorage
    function loadHighScores() {
      const stored = localStorage.getItem("topScores");
      if (stored) {
        topScores = JSON.parse(stored);
      }
    }
    
    // Uppdatera highscore-listan med topp 3, d√§r varje highscore visar datum/tid via title
    function updateHighscoreDisplay() {
      const medals = ["ü•á", "ü•à", "ü•â"];
      let html = "";
      for (let i = 0; i < medals.length; i++) {
        let scoreObj = topScores[i] !== undefined ? topScores[i] : { score: 0, date: "" };
        let displayScore = scoreObj.score || 0;
        let displayDate = scoreObj.date ? new Date(scoreObj.date).toLocaleString() : "";
        html += `<span class="highscore-item" title="${displayDate}">${medals[i]} ${displayScore}</span>`;
      }
      highScoreEl.innerHTML = html;
    }
    
    // Visa game-over-kortet
    function displayGameOverCard(finalScore, adjustment) {
      gameOver = true;
      cardsContainer.innerHTML = "";
      const gameOverCard = document.createElement('div');
      gameOverCard.className = "game-over-card";
      const headline = document.createElement('div');
      headline.className = "card-headline";
      headline.textContent = "Spelet √§r √∂ver, tack f√∂r att du spelade!";
      const description = document.createElement('div');
      description.className = "card-description";
      let bonusText = "";
      if (adjustment > 0) bonusText = "Bonus: +" + adjustment;
      else if (adjustment < 0) bonusText = "Avdrag: " + adjustment;
      description.textContent = "Po√§ng: " + finalScore + (bonusText ? " (" + bonusText + ")" : "");
      gameOverCard.appendChild(headline);
      gameOverCard.appendChild(description);
      cardsContainer.appendChild(gameOverCard);
    }
    
    // Hantera √§ndringar i dropdowns ‚Äì om spelet √§r p√•g√•ende och inte √∂ver visas en dialog
    function handleOptionChange() {
      if (gameOngoing && !gameOver) {
        if (confirm("Vill du b√∂rja om med de nya inst√§llningarna?")) {
          initGame();
          previousDifficulty = difficultySelect.value;
          previousHandCount = handCountSelect.value;
        } else {
          difficultySelect.value = previousDifficulty;
          handCountSelect.value = previousHandCount;
        }
      } else {
        initGame();
        previousDifficulty = difficultySelect.value;
        previousHandCount = handCountSelect.value;
      }
    }
    
    difficultySelect.addEventListener('change', handleOptionChange);
    handCountSelect.addEventListener('change', handleOptionChange);
    
    // Initiera/√•terst√§ll spelet ‚Äì nollst√§ller gameOngoing och gameOver
    function initGame() {
      gameOngoing = false;
      gameOver = false;
      const difficulty = difficultySelect.value;
      const startingHandCount = parseInt(handCountSelect.value);
      initialHandCount = startingHandCount;
      let filtered = [];
      if (difficulty === "latt") filtered = eventsData.filter(event => event.importance === 1);
      else if (difficulty === "medel") filtered = eventsData.filter(event => event.importance === 1 || event.importance === 2);
      else if (difficulty === "svar") filtered = eventsData.filter(event => event.importance >= 1);
      // Ta bort dubbletter per √•r (beh√•ll det f√∂rsta eventet per √•r)
      let uniqueEventsMap = new Map();
      filtered.forEach(event => {
        if (!uniqueEventsMap.has(event.year)) uniqueEventsMap.set(event.year, event);
      });
      let uniqueEvents = Array.from(uniqueEventsMap.values());
      deck = uniqueEvents.sort(() => Math.random() - 0.5);
      hand = [];
      timeline = [];
      score = 0;
      currentScoreEl.textContent = score;
      cardsContainer.innerHTML = "";
      if (deck.length > 0) addEventToTimeline(deck.shift());
      while (hand.length < startingHandCount && deck.length > 0) {
        let card = deck.shift();
        hand.push(card);
      }
      renderHand();
      renderTimeline();
      updateHighscoreDisplay();
    }
    
    // Rendera spelarens hand ‚Äì den scrollande beskrivningen visas med bakgrund, ram och padding
    function renderHand() {
      if (gameOver) return;
      cardsContainer.innerHTML = "";
      hand.forEach((card, index) => {
        const cardDiv = document.createElement('div');
        cardDiv.className = "card";
        if (animateNewCard && index === hand.length - 1) {
          cardDiv.classList.add("card-animate-in");
          cardDiv.addEventListener('animationend', () => {
            cardDiv.classList.remove("card-animate-in");
          });
        }
        // Skapa rubriken
        const headlineDiv = document.createElement('div');
        headlineDiv.className = "card-headline";
        headlineDiv.textContent = card.headline;
        
        // Skapa den scrollande beskrivningen med duplicerad text och separator
        const descriptionDiv = document.createElement('div');
        descriptionDiv.className = "card-description";
        const scrollingDiv = document.createElement('div');
        scrollingDiv.className = "scrolling-text";
        
        const textSpan1 = document.createElement('span');
        textSpan1.className = "text-content";
        textSpan1.textContent = card.description;
        
        const separatorSpan = document.createElement('span');
        separatorSpan.className = "separator";
        separatorSpan.textContent = "/";
        
        const textSpan2 = document.createElement('span');
        textSpan2.className = "text-content";
        textSpan2.textContent = card.description;
        
        scrollingDiv.appendChild(textSpan1);
        scrollingDiv.appendChild(separatorSpan);
        scrollingDiv.appendChild(textSpan2);
        descriptionDiv.appendChild(scrollingDiv);
        
        cardDiv.appendChild(headlineDiv);
        cardDiv.appendChild(descriptionDiv);
        
        // Klickh√§ndelse f√∂r att markera valt kort (p√•verkar ej den scrollande texten)
        cardDiv.addEventListener('click', () => {
          if (gameOver) return;
          document.querySelectorAll('.card').forEach(c => c.classList.remove('selected'));
          cardDiv.classList.add('selected');
          selectedCard = { card, index };
          gameOngoing = true;
        });
        
        cardsContainer.appendChild(cardDiv);
      });
      animateNewCard = false;
    }
    
    // Rendera tidslinjen
    function renderTimeline() {
      timelineContainer.innerHTML = "";
      timeline.sort((a, b) => a.year - b.year);
      const dropBefore = createDropZone(null, timeline[0]);
      timelineContainer.appendChild(dropBefore);
      timeline.forEach((event, i) => {
        const eventDiv = document.createElement('div');
        eventDiv.className = "timeline-event";
        if (!event.rendered) {
          eventDiv.classList.add("timeline-animate");
          event.rendered = true;
        }
        const yearDiv = document.createElement('div');
        yearDiv.className = "event-year";
        yearDiv.textContent = event.year;
        const detailsDiv = document.createElement('div');
        detailsDiv.style.display = "flex";
        detailsDiv.style.flexDirection = "column";
        const headlineDiv = document.createElement('div');
        headlineDiv.className = "event-headline";
        headlineDiv.textContent = event.headline;
        const descDiv = document.createElement('div');
        descDiv.className = "event-description";
        descDiv.textContent = event.description;
        descDiv.style.display = "none";
        detailsDiv.appendChild(headlineDiv);
        detailsDiv.appendChild(descDiv);
        eventDiv.addEventListener('click', () => {
          if (descDiv.style.display === "block") {
            descDiv.style.display = "none";
            const lineHeight = parseFloat(window.getComputedStyle(headlineDiv).lineHeight);
            detailsDiv.style.justifyContent = (headlineDiv.offsetHeight <= lineHeight * 1.1) ? "center" : "flex-start";
          } else {
            descDiv.style.display = "block";
            detailsDiv.style.justifyContent = "flex-start";
          }
        });
        eventDiv.appendChild(yearDiv);
        eventDiv.appendChild(detailsDiv);
        timelineContainer.appendChild(eventDiv);
        if (i < timeline.length - 1) {
          const dropZone = createDropZone(timeline[i], timeline[i+1]);
          timelineContainer.appendChild(dropZone);
        }
      });
      const dropAfter = createDropZone(timeline[timeline.length - 1], null);
      timelineContainer.appendChild(dropAfter);
    }
    
    // Skapa dropzon ‚Äì om skillnaden mellan tv√• h√§ndelser √§r exakt 1 √•r, returnera ett tomt fragment
    function createDropZone(lowerEvent, upperEvent) {
      if (lowerEvent && upperEvent && (upperEvent.year - lowerEvent.year === 1)) {
        return document.createDocumentFragment();
      }
      const dropZone = document.createElement('div');
      dropZone.className = "drop-zone";
      let label = "";
      if (!lowerEvent && upperEvent) label = "F√∂re: " + upperEvent.year;
      else if (lowerEvent && !upperEvent) label = "Efter: " + lowerEvent.year;
      else if (lowerEvent && upperEvent) label = "Mellan: " + lowerEvent.year + " och " + upperEvent.year;
      dropZone.textContent = label;
      dropZone.addEventListener('click', () => {
        if (gameOver) return;
        if (!selectedCard) return;
        const cardYear = selectedCard.card.year;
        let valid = false;
        if (!lowerEvent && upperEvent) valid = cardYear < upperEvent.year;
        else if (lowerEvent && !upperEvent) valid = cardYear > lowerEvent.year;
        else if (lowerEvent && upperEvent) valid = cardYear > lowerEvent.year && cardYear < upperEvent.year;
        if (valid) {
          const cardElements = cardsContainer.querySelectorAll('.card');
          const cardElement = cardElements[selectedCard.index];
          if (cardElement) cardElement.classList.add("card-animate-out");
          score++;
          addEventToTimeline(selectedCard.card);
          renderTimeline();
          setTimeout(() => {
            hand.splice(selectedCard.index, 1);
            if (deck.length > 0) {
              let newCard = deck.shift();
              hand.push(newCard);
              animateNewCard = true;
            }
            selectedCard = null;
            currentScoreEl.textContent = score;
            if (hand.length === 0) {
              let adjustment = (initialHandCount < 5) ? (5 - initialHandCount) : -(initialHandCount - 5);
              let finalScore = score + adjustment;
              topScores.push({ score: finalScore, date: new Date() });
              topScores.sort((a, b) => b.score - a.score);
              if (topScores.length > 3) topScores = topScores.slice(0, 3);
              saveHighScores();
              updateHighscoreDisplay();
              displayGameOverCard(finalScore, adjustment);
              return;
            }
            renderHand();
          }, 500);
        } else {
          const originalLabel = dropZone.textContent;
          dropZone.textContent = "R√§tt svar: " + selectedCard.card.year;
          dropZone.classList.add("error");
          setTimeout(() => {
            dropZone.textContent = originalLabel;
            dropZone.classList.remove("error");
          }, 3000);
          const cardElements = cardsContainer.querySelectorAll('.card');
          const cardElement = cardElements[selectedCard.index];
          if (cardElement) cardElement.classList.add("card-animate-out");
          setTimeout(() => {
            hand.splice(selectedCard.index, 1);
            selectedCard = null;
            currentScoreEl.textContent = score;
            if (hand.length === 0) {
              let adjustment = (initialHandCount < 5) ? (5 - initialHandCount) : -(initialHandCount - 5);
              let finalScore = score + adjustment;
              topScores.push({ score: finalScore, date: new Date() });
              topScores.sort((a, b) => b.score - a.score);
              if (topScores.length > 3) topScores = topScores.slice(0, 3);
              saveHighScores();
              updateHighscoreDisplay();
              displayGameOverCard(finalScore, adjustment);
              return;
            }
            renderHand();
            renderTimeline();
          }, 1000);
        }
      });
      return dropZone;
    }
    
    // L√§gg till ett event i tidslinjen
    function addEventToTimeline(event) {
      timeline.push(event);
    }
    
    resetBtn.addEventListener('click', initGame);
    loadHighScores();
    initGame();
  </script>
</body>
</html>
