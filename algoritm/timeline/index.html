<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Timeline &#8611; Artificiell Intelligens</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400&family=Source+Serif+Pro&display=swap" />
  <style>
    :root {
      --bg: #f4f4f4;
      --white: #ffffff;
      --primary: #40534C;
      --cell_mediumgreen: #3CB371;
      --dark: #1A3636;
      --text: #644117;
      --subtle: #D6BD98;
      --effect: #677D6A;
      --placeholder: #B9AFA1;
      --textarea: #FCF8F4;
      --extra_effect: #D98E04;
      --extra_primary: #E0A030;
      --extra_red: #A44434;
      --status_graygreen: #8E9775;
      --status_olivegreen: #5B7052;
      --status_ochreyellow: #D4A76A;
      --status_goldenbrown: #C2955C;
      --status_sienna: #A0522D;
      --status_burntumber: #8A3324;
      --status_steelblue: #4682B4;
      --status_darkblue:  #2C3E50;
      --status_mjuklavendel: #A7A0C9;
      --status_d√§mpadlila:  #6B5876;
      
      --card-bg: #E0F2E9;
      --timeline-bg: #F9E79F;
      --score-bg: #D98E04;
      --score-text: #ffffff;
      
      /* F√§rgvariabler f√∂r de 5 korten */
      --card-color-1: #D4A76A;
      --card-color-1-border: #C2955C;
      
      --card-color-2: #4682B4;
      --card-color-2-border: #2C3E50;
      
      --card-color-3: #A7A0C9;
      --card-color-3-border: #6B5876;
      
      --card-color-4: #8E9775;
      --card-color-4-border: #5B7052;
      
      --card-color-5: #A0522D;
      --card-color-5-border: #8A3324;
    }
    
    * { box-sizing: border-box; }
    
    body {
      font-family: 'Source Serif Pro', serif;
      margin: 0;
      padding: 0;
      background-color: var(--bg);
    }
    
    .container {
      width: 740px;
      min-width: 740px;
      background-color: var(--white);
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      padding: 20px;
      margin: 20px auto;
    }
    
    /* Rubrik med emoji: endast emoji h√∂gerjusteras */
    h1 {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      font-size: 24px;
      color: var(--white);
      background-color: var(--primary);
      border-radius: 8px 8px 0 0;
      padding: 10px 20px;
      display: flex;
      align-items: center;
    }
    h1 .header-emoji {
      margin-left: auto;
    }
    
    .inforuta {
      margin-top: 0;
      font-size: 15px;
      color: var(--text);
      background-color: var(--subtle);
      border-radius: 0 0 8px 8px;
      padding: 10px 20px;
      margin-bottom: 15px;
    }
    
    .score-board {
      background-color: var(--score-bg);
      color: var(--score-text);
      font-size: 24px;
      text-align: center;
      border-radius: 5px;
      padding: 10px;
      margin: 15px 0;
    }
    
    .game-area {
      display: flex;
      gap: 15px;
      background-color: var(--effect);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
      border: 1px solid var(--primary);
    }
    
    .cards-container {
      flex: 0 0 40%;
      background-color: var(--primary);
      padding: 10px;
      border-radius: 8px;
    }
    
    .card {
      border: 1px solid; /* Ramf√§rg s√§tts via JavaScript */
      border-radius: 4px;
      padding: 10px;
      margin-bottom: 10px;
      cursor: pointer;
    }
    
    .card.selected {
      border-color: var(--primary);
      background-color: var(--subtle);
    }
    
    .card-headline {
      font-size: 16px;
      font-weight: bold;
      color: var(--white);
    }
    
    .card-description {
      font-size: 14px;
      color: var(--white);
      margin-top: 5px;
      display: none;
    }
    
    .timeline-container {
      flex: 1;
      background-color: var(--primary);
      padding: 10px;
      border-radius: 8px;
      position: relative;
    }
    
    .timeline-event {
      background-color: var(--status_graygreen);
      border: 1px solid var(--status_olivegreen);
      border-radius: 4px;
      margin: 5px 0;
      padding: 10px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
    }
    
    .event-year {
      font-family: monospace;
      font-size: 20px;
      font-weight: 600;
      color: var(--white);
      min-width: 60px;
      text-align: center;
      padding: 5px;
      background-color: rgba(91, 112, 82, 0.5);
      border: 1px solid var(--status_olivegreen);
      border-radius: 4px;
    }
    
    .event-headline {
      font-family: monospace;
      font-size: 14px;
      font-weight: 500;
      color: var(--white);
    }
    
    .event-description {
      display: none;
      font-family: monospace;
      margin-top: 5px;
      font-size: 12px;
      color: var(--white);
    }
    
    .drop-zone {
      background-color: var(--primary);
      color: var(--white);
      border: 1px dashed var(--effect);
      font-family: monospace;
      font-size: 12px;
      border-radius: 4px;
      margin: 5px 0;
      padding: 5px;
      text-align: center;
      cursor: pointer;
    }
    
    button {
      display: block;
      margin: 0 auto;
      padding: 10px 20px;
      font-size: 16px;
      background-color: var(--primary);
      color: var(--white);
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    
    button:hover {
      background-color: var(--effect);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>
      Timeline &#8611; Artificiell Intelligens 
      <span class="header-emoji">üòµ</span>
    </h1>
    <p class="inforuta">
      Vad kan du egentligen om den Artificiella Intelligensens historia? Testa dina kunskaper genom att placera in historiska h√§ndelser p√• en tidslinje. H√§ndelserna √§r i f√∂rsta hand h√§mtade fr√•n AI:ns historia, men √§ven datorns historia d√• de √§r sammanl√§nkade. <strong>Spelet √§r √∂ver efter 5 fel.</strong>
    </p>

    <div class="game-area">
      <div class="cards-container" id="cards-container">
        <!-- Spelkorten visas h√§r -->
      </div>
      <div class="timeline-container" id="timeline-container">
        <!-- Tidslinjen med h√§ndelser visas h√§r -->
      </div>
    </div>
    <button id="reset-btn">Starta om</button>

    <div class="score-board">
      Po√§ng: <span id="score">0</span> | Misstag kvar: <span id="lives">5</span>
    </div>
  </div>
  
  <script>
    // H√§mta f√§rger fr√•n CSS-variabler
    const rootStyles = getComputedStyle(document.documentElement);
    const defaultCardColors = [
      rootStyles.getPropertyValue('--card-color-1').trim(),
      rootStyles.getPropertyValue('--card-color-2').trim(),
      rootStyles.getPropertyValue('--card-color-3').trim(),
      rootStyles.getPropertyValue('--card-color-4').trim(),
      rootStyles.getPropertyValue('--card-color-5').trim()
    ];
    const defaultCardBorderColors = [
      rootStyles.getPropertyValue('--card-color-1-border').trim(),
      rootStyles.getPropertyValue('--card-color-2-border').trim(),
      rootStyles.getPropertyValue('--card-color-3-border').trim(),
      rootStyles.getPropertyValue('--card-color-4-border').trim(),
      rootStyles.getPropertyValue('--card-color-5-border').trim()
    ];
    
    /* 
      H√§ndelsedata: Varje objekt inneh√•ller:
      - year: √•rtalet
      - headline: kort rubrik
      - description: l√§ngre beskrivning
      - importance: 1, 2 eller 3 (1 anv√§nds f√∂rst; 0 = utesluts)
    */
    const eventsData = [
      { year: 1822, headline: "Babbage konceptualiserar sin revolutionerande maskin", description: "Charles Babbage konceptualiserar Difference Engine", importance: 2 },
      { year: 1837, headline: "Ada Lovelace skriver f√∂rsta algoritmen", description: "Ada Lovelace skriver det f√∂rsta algoritmiska konceptet f√∂r Babbages maskin", importance: 1 },
      { year: 1936, headline: "Turing definierar Turingmaskinen", description: "Alan Turing publicerar 'On Computable Numbers' och introducerar Turingmaskinen", importance: 1 },
      { year: 1943, headline: "Neurala n√§tverk tar sin b√∂rjan", description: "McCulloch och Pitts presenterar den f√∂rsta matematiska modellen av neurala n√§tverk", importance: 2 },
      { year: 1943, headline: "Colossus kn√§cker koder", description: "Colossus ‚Äì v√§rldens f√∂rsta programmerbara digitala dator ‚Äì anv√§nds f√∂r att kn√§cka tyska koder under andra v√§rldskriget", importance: 2 },
      { year: 1946, headline: "ENIAC revolutionen startar", description: "ENIAC, den f√∂rsta elektroniska allm√§nna datorn, tas i bruk", importance: 1 },
      { year: 1947, headline: "Transistorn f√∂r√§ndrar allt", description: "Transistorn uppfinns vid Bell Labs, vilket revolutionerar elektronikindustrin", importance: 1 },
      { year: 1950, headline: "Turing introducerar Turingtestet", description: "Alan Turing introducerar Turingtestet i 'Computing Machinery and Intelligence'", importance: 1 },
      { year: 1951, headline: "Ferranti Mark 1 lanseras", description: "Ferranti Mark 1 blir den f√∂rsta kommersiellt tillg√§ngliga datorn", importance: 2 },
      { year: 1952, headline: "Samuel skapar AI-schackprogram", description: "Arthur Samuel utvecklar ett schackprogram med maskininl√§rning ‚Äì ett tidigt exempel p√• AI", importance: 2 },
      { year: 1956, headline: "Begreppet Artificiell Intelligens myntas", description: "Dartmouth-konferensen h√•lls och myntar begreppet 'artificiell intelligens'", importance: 1 },
      { year: 1958, headline: "Integrerade kretsar s√§tter ny standard", description: "Inventionen av integrerade kretsar (av Jack Kilby och Robert Noyce) s√§tter en ny teknisk era", importance: 1 },
      { year: 1962, headline: "ELIZA simulerar m√§nskligt samtal", description: "Joseph Weizenbaum skapar ELIZA, ett tidigt program som simulerar naturligt samtal", importance: 2 },
      { year: 1964, headline: "IBM revolutionerar med System/360", description: "IBM lanserar System/360, en serie datorer som s√§tter standarden f√∂r arkitektur", importance: 2 },
      { year: 1965, headline: "Moores lag f√∂rutsp√•r datorkraftens √∂kning", description: "Gordon Moore formulerar Moores lag, som f√∂rutsp√•r den exponentiella √∂kningen av datorkraft", importance: 2 },
      { year: 1966, headline: "Shakey roboten r√∂r sig f√∂r f√∂rsta g√•ngen", description: "Shakey the Robot, den f√∂rsta mobila roboten med perceptuella och beslutsfattande f√∂rm√•gor, utvecklas", importance: 2 },
      { year: 1969, headline: "ARPANET banar v√§g f√∂r internet", description: "ARPANET lanseras ‚Äì en f√∂reg√•ngare till dagens Internet", importance: 1 },
      { year: 1970, headline: "Relationsdatabasen tar form", description: "Edgar F. Codd introducerar den relationsdatabasmodell som revolutionerar datalagring", importance: 2 },
      { year: 1971, headline: "Mikroprocessorn 4004 lanseras", description: "Intel sl√§pper mikroprocessorn 4004, som markerar b√∂rjan p√• modern datorteknik", importance: 1 },
      { year: 1972, headline: "Pong underh√•ller v√§rlden", description: "Videospelsfenomenet 'Pong' lanseras och visar p√• digital underh√•llnings potential", importance: 3 },
      { year: 1973, headline: "GUI introduceras med Xerox Alto", description: "Xerox Alto introduceras med grafiskt anv√§ndargr√§nssnitt (GUI) och musen ‚Äì f√∂reb√•dar dagens datorer", importance: 2 },
      { year: 1974, headline: "MYCIN diagnostiserar med AI", description: "MYCIN, ett tidigt expertssystem f√∂r medicinsk diagnostik, utvecklas", importance: 2 },
      { year: 1975, headline: "Altair kickstartar PC-eran", description: "Altair 8800 sl√§pps och s√§tter ig√•ng persondatorrevolutionen", importance: 2 },
      { year: 1976, headline: "Apple grundas ‚Äì en ny era inleds", description: "Apple Computer grundas av Steve Jobs, Steve Wozniak och Ronald Wayne", importance: 1 },
      { year: 1977, headline: "Apple II populariserar persondatorn", description: "Apple II lanseras och bidrar till att popularisera persondatorer", importance: 2 },
      { year: 1978, headline: "Intresse f√∂r neurala n√§tverk √•terupplivas", description: "Forskningsinsatser √•terupplivar intresset f√∂r artificiella neurala n√§tverk", importance: 3 },
      { year: 1979, headline: "Expertssystem b√∂rjar anv√§ndas brett", description: "De f√∂rsta expert systemen b√∂rjar f√• genomslag inom olika till√§mpningsomr√•den", importance: 3 },
      { year: 1980, headline: "Industriell AI expanderar", description: "Expertssystem expanderar inom industri och medicin", importance: 3 },
      { year: 1981, headline: "IBM PC definierar persondatorn", description: "IBM introducerar den f√∂rsta IBM PC:n, vilket standardiserar persondatorer", importance: 1 },
      { year: 1982, headline: "Portabla datorer visar framtiden", description: "De f√∂rsta portabla datorerna och mobiltelefonerna b√∂rjar visa datorns framtid i r√∂relse", importance: 3 },
      { year: 1983, headline: "Backpropagation √•teruppt√§cks", description: "Backpropagation-algoritmen √•teruppt√§cks och banar v√§g f√∂r modern tr√§ning av neurala n√§tverk", importance: 2 },
      { year: 1984, headline: "Macintosh med grafiskt gr√§nssnitt lanseras", description: "Apple lanserar Macintosh med sitt banbrytande grafiska gr√§nssnitt", importance: 1 },
      { year: 1985, headline: "TCP/IP standardiseras", description: "TCP/IP blir standardprotokoll, vilket m√∂jligg√∂r global datakommunikation", importance: 2 },
      { year: 1986, headline: "Genombrott inom neurala n√§tverk", description: "Geoffrey Hinton och kollegor publicerar banbrytande arbeten om neurala n√§tverk", importance: 2 },
      { year: 1987, headline: "Fuzzy logic tar plats i industrin", description: "Fuzzy logic introduceras i industriella styrsystem f√∂r att hantera os√§ker information", importance: 3 },
      { year: 1988, headline: "F√∂rberedelser f√∂r World Wide Web", description: "Tidiga koncept och tekniska f√∂rberedelser f√∂r det som snart blir World Wide Web", importance: 3 },
      { year: 1989, headline: "WWW-f√∂rslaget", description: "Tim Berners-Lee f√∂resl√•r World Wide Web, en id√© som revolutionerar informationsspridning", importance: 1 },
      { year: 1990, headline: "Internet expanderar med WWW", description: "World Wide Web blir allm√§nt tillg√§ngligt och transformerar global kommunikation", importance: 2 },
      { year: 1991, headline: "Linux och √∂ppen k√§llkod tar fart", description: "Linux-k√§rnan lanseras av Linus Torvalds, vilket s√§tter ig√•ng √∂ppen k√§llkodsr√∂relsen", importance: 2 },
      { year: 1992, headline: "Statistiska metoder vinner mark", description: "Statistiska maskininl√§rningsmetoder, s√•som support vector machines, b√∂rjar f√• genomslag", importance: 3 },
      { year: 1993, headline: "Deep Blue f√∂rbereds", description: "IBM inleder projektet Deep Blue med m√•let att utmana schackens m√§stare", importance: 3 },
      { year: 1994, headline: "DVD-teknologin f√∂r√§ndrar multimedia", description: "DVD-teknologin introduceras och m√∂jligg√∂r lagring av h√∂gkvalitativ multimedia", importance: 3 },
      { year: 1995, headline: "Java f√∂renklar utveckling", description: "Java programmeringsspr√•k lanseras, vilket underl√§ttar plattformsoberoende utveckling", importance: 3 },
      { year: 1996, headline: "Deep Blue m√∂ter Kasparov", description: "IBM:s Deep Blue m√∂ter Garry Kasparov i schack, en signal om AI:s framsteg", importance: 3 },
      { year: 1997, headline: "Deep Blue besegrar Kasparov", description: "IBM:s Deep Blue besegrar Garry Kasparov ‚Äì en historisk milstolpe f√∂r AI", importance: 1 },
      { year: 1998, headline: "Google startar s√∂krevolutionen", description: "Google grundas och f√∂r√§ndrar hur vi s√∂ker och hanterar information", importance: 1 },
      { year: 1999, headline: "Robotik visar praktisk AI", description: "Framsteg inom robotik, med humanoida prototyper och autonoma system, visar AI:s praktiska till√§mpningar", importance: 3 },
      { year: 2000, headline: "Smartphones och kameror tar √∂ver", description: "Konsumentelektroniken tar ett stort kliv med digitala kameror och de f√∂rsta smartphones", importance: 3 },
      { year: 2001, headline: "E-handel omformar global handel", description: "E-handeln v√§xer, trots dot-com-krisen, och omformar global handel", importance: 3 },
      { year: 2002, headline: "Roomba introduceras i hush√•llet", description: "iRobot lanserar Roomba ‚Äì ett tidigt exempel p√• AI i hush√•llsprodukter", importance: 3 },
      { year: 2003, headline: "Genomprojektet avslutas", description: "Det m√§nskliga genomprojektet avslutas, ett bevis p√• avancerad datorkraft inom biovetenskap", importance: 3 },
      { year: 2004, headline: "Facebook f√∂r√§ndrar kommunikationen", description: "Facebook lanseras och omdefinierar s√§ttet vi kommunicerar p√• n√§tet", importance: 3 },
      { year: 2005, headline: "YouTube banar videodelning", description: "YouTube startar, vilket banar v√§g f√∂r digitalt videoinneh√•ll och global delning", importance: 3 },
      { year: 2006, headline: "Djupinl√§rning √•terupplivas", description: "Geoffrey Hinton och forskargruppen √•terupplivar djupinl√§rning, vilket utl√∂ser en AI-revolution", importance: 1 },
      { year: 2007, headline: "iPhone revolutionerar mobilteknik", description: "Apple introducerar iPhone, vilket revolutionerar mobil datorteknik och app-ekonomi", importance: 1 },
      { year: 2008, headline: "Molntj√§nster omdefinierar IT", description: "Amazon lanserar AWS, och molntj√§nster blir en ny global IT-infrastruktur", importance: 1 },
      { year: 2009, headline: "Bitcoin s√§tter blockchain-grunden", description: "Bitcoin-whitepaper publiceras av Satoshi Nakamoto, vilket l√§gger grunden f√∂r blockchain och kryptovalutor", importance: 1 },
      { year: 2010, headline: "iPad introducerar en ny plattform", description: "Apple lanserar iPad, vilket populariserar surfplattor som en ny datorplattform", importance: 3 },
      { year: 2011, headline: "Watson visar AI:s spr√•kf√∂rm√•ga", description: "IBM:s Watson vinner Jeopardy! och demonstrerar AI:s f√∂rm√•ga att hantera naturligt spr√•k", importance: 1 },
      { year: 2012, headline: "AlexNet visar djupinl√§rningens potential", description: "AlexNet vinner ImageNet-t√§vlingen och visar den enorma potentialen hos djupinl√§rning", importance: 1 },
      { year: 2013, headline: "Sj√§lvk√∂rande bilar visar framtidens transport", description: "Google presenterar sina sj√§lvstyrande bilprojekt, vilket visar AI:s roll i transportens framtid", importance: 3 },
      { year: 2014, headline: "AlphaGo tar sig an spelet Go", description: "AlphaGo-projektet inleds med ambitionen att bem√§stra det komplexa spelet Go", importance: 3 },
      { year: 2015, headline: "OpenAI startar s√§ker AI-forskning", description: "OpenAI grundas med m√•let att utveckla s√§ker och f√∂rdelaktig AI", importance: 3 },
      { year: 2016, headline: "AlphaGo besegrar Lee Sedol", description: "AlphaGo besegrar den koreanska Go-m√§staren Lee Sedol ‚Äì en milstolpe f√∂r maskininl√§rning", importance: 1 },
      { year: 2017, headline: "AI utmanar eSport", description: "AI-system som OpenAI Five visar upp avancerade tekniker inom f√∂rst√§rkt l√§rande genom att t√§vla i spel (t.ex. Dota 2)", importance: 3 },
      { year: 2018, headline: "Google Duplex visar naturliga samtal", description: "Google Duplex imponerar med f√∂rm√•gan att f√∂ra naturliga samtal och boka tider via AI", importance: 3 },
      { year: 2019, headline: "GPT-2 driver spr√•kmodellrevolutionen", description: "OpenAI sl√§pper GPT-2, vilket driver fram utvecklingen inom generativ spr√•kmodellering", importance: 3 },
      { year: 2020, headline: "GPT-3 imponerar med sin kraft", description: "OpenAI lanserar GPT-3, en av de mest kraftfulla spr√•kmodellerna hittills", importance: 1 },
      { year: 2021, headline: "Transformer-modeller omformar AI-forskningen", description: "Transformerbaserade modeller dominerar AI-forskningen och banar v√§g f√∂r nya applikationer", importance: 3 },
      { year: 2022, headline: "ChatGPT f√∂r√§ndrar AI-interaktionen", description: "ChatGPT och liknande konversationsmodeller introduceras och f√∂r√§ndrar interaktionen med AI", importance: 1 },
      { year: 2023, headline: "Multimodala AI-system expanderar", description: "Fortsatta framsteg inom storskaliga och multimodala AI-system expanderar m√∂jligheterna inom b√•de forskning och kommersiella applikationer", importance: 3 }
    ];
    
    // -----------------------------
    // Spelvariabler
    // -----------------------------
    let deck = [];      // Kortleken, sorterad efter importance
    let hand = [];      // Spelarens aktuella hand (5 kort)
    let timeline = [];  // H√§ndelser placerade p√• tidslinjen
    let score = 0;
    let lives = 5;
    const handSize = 5;
    
    // Referenser till DOM-element
    const cardsContainer = document.getElementById('cards-container');
    const timelineContainer = document.getElementById('timeline-container');
    const scoreEl = document.getElementById('score');
    const livesEl = document.getElementById('lives');
    const resetBtn = document.getElementById('reset-btn');
    let selectedCard = null;
    
    // Initiera (eller √•terst√§ll) spelet
    function initGame() {
      // Filtrera h√§ndelser med importance > 0 och gruppera (importance 1 f√∂rst, sedan 2 och 3)
      const groups = [[], [], []];
      eventsData.forEach(event => {
        if (event.importance > 0) {
          groups[event.importance - 1].push(event);
        }
      });
      groups.forEach(group => group.sort(() => Math.random() - 0.5));
      deck = [...groups[0], ...groups[1], ...groups[2]];
      
      hand = [];
      timeline = [];
      score = 0;
      lives = 5;
      selectedCard = null;
      scoreEl.textContent = score;
      livesEl.textContent = lives;
      
      // Starta tidslinjen med ett slumpat evenemang
      addEventToTimeline(deck.shift());
      
      // Fyll spelarens hand med 5 kort med bakgrunds- och ramf√§rg.
      while (hand.length < handSize && deck.length > 0) {
        let card = deck.shift();
        card.color = defaultCardColors[hand.length]; 
        card.borderColor = defaultCardBorderColors[hand.length];
        hand.push(card);
      }
      
      renderHand();
      renderTimeline();
    }
    
    // Rendera spelarens hand ‚Äì visar rubrik och, vid klick, √§ven beskrivning.
    function renderHand() {
      cardsContainer.innerHTML = "";
      hand.forEach((card, index) => {
        const cardDiv = document.createElement('div');
        cardDiv.className = "card";
        cardDiv.style.backgroundColor = card.color || 'var(--white)';
        cardDiv.style.borderColor = card.borderColor || 'var(--primary)';
        
        const headlineDiv = document.createElement('div');
        headlineDiv.className = "card-headline";
        headlineDiv.textContent = card.headline;
        
        const descriptionDiv = document.createElement('div');
        descriptionDiv.className = "card-description";
        descriptionDiv.textContent = card.description;
        descriptionDiv.style.display = "none";
        
        cardDiv.appendChild(headlineDiv);
        cardDiv.appendChild(descriptionDiv);
        
        cardDiv.addEventListener('click', () => {
          document.querySelectorAll('.card').forEach(c => {
            c.classList.remove('selected');
            const desc = c.querySelector('.card-description');
            if (desc) { desc.style.display = "none"; }
          });
          cardDiv.classList.add('selected');
          descriptionDiv.style.display = "block";
          selectedCard = { card, index };
        });
        
        cardsContainer.appendChild(cardDiv);
      });
    }
    
    // Rendera tidslinjen ‚Äì visar h√§ndelser med √•r och rubrik.
    function renderTimeline() {
      timelineContainer.innerHTML = "";
      timeline.sort((a, b) => a.year - b.year);
      
      const dropBefore = createDropZone(null, timeline[0]);
      timelineContainer.appendChild(dropBefore);
      
      timeline.forEach((event, i) => {
        const eventDiv = document.createElement('div');
        eventDiv.className = "timeline-event";
        
        const yearDiv = document.createElement('div');
        yearDiv.className = "event-year";
        yearDiv.textContent = event.year;
        
        const headlineDiv = document.createElement('div');
        headlineDiv.className = "event-headline";
        headlineDiv.textContent = event.headline;
        
        const descDiv = document.createElement('div');
        descDiv.className = "event-description";
        descDiv.textContent = event.description;
        descDiv.style.display = "none";
        
        eventDiv.addEventListener('click', () => {
          descDiv.style.display = descDiv.style.display === "block" ? "none" : "block";
        });
        
        eventDiv.appendChild(yearDiv);
        eventDiv.appendChild(headlineDiv);
        eventDiv.appendChild(descDiv);
        
        timelineContainer.appendChild(eventDiv);
        
        if (i < timeline.length - 1) {
          const dropZone = createDropZone(event, timeline[i+1]);
          timelineContainer.appendChild(dropZone);
        }
      });
      
      const dropAfter = createDropZone(timeline[timeline.length - 1], null);
      timelineContainer.appendChild(dropAfter);
    }
    
    // Skapa en "drop zone" med etikett beroende p√• position.
    function createDropZone(lowerEvent, upperEvent) {
      const dropZone = document.createElement('div');
      dropZone.className = "drop-zone";
      let label = "";
      if (!lowerEvent && upperEvent) {
        label = "F√∂re: " + upperEvent.year;
      } else if (lowerEvent && !upperEvent) {
        label = "Efter: " + lowerEvent.year;
      } else if (lowerEvent && upperEvent) {
        label = "Mellan: " + lowerEvent.year + " och " + upperEvent.year;
      }
      dropZone.textContent = label;
      dropZone.addEventListener('click', () => {
        if (!selectedCard) {
          alert("V√§lj ett kort f√∂rst!");
          return;
        }
        const cardYear = selectedCard.card.year;
        let valid = false;
        if (!lowerEvent && upperEvent) {
          valid = cardYear < upperEvent.year;
        } else if (lowerEvent && !upperEvent) {
          valid = cardYear > lowerEvent.year;
        } else if (lowerEvent && upperEvent) {
          valid = cardYear > lowerEvent.year && cardYear < upperEvent.year;
        }
        
        if (valid) {
          score++;
          addEventToTimeline(selectedCard.card);
          hand.splice(selectedCard.index, 1);
          if (deck.length > 0) {
            let newCard = deck.shift();
            newCard.color = selectedCard.card.color;
            newCard.borderColor = selectedCard.card.borderColor;
            hand.push(newCard);
          }
        } else {
          lives--;
          if (lives <= 0) {
            alert("Spelet √∂ver! Du fick " + score + " po√§ng.");
            initGame();
            return;
          } else {
            alert("Fel placering! F√∂rs√∂k igen.");
          }
        }
        selectedCard = null;
        scoreEl.textContent = score;
        livesEl.textContent = lives;
        renderHand();
        renderTimeline();
      });
      return dropZone;
    }
    
    // L√§gg till ett evenemang i tidslinjen
    function addEventToTimeline(event) {
      timeline.push(event);
    }
    
    resetBtn.addEventListener('click', initGame);
    initGame();
  </script>
</body>
</html>